<HTML>
<HEAD>
<meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<LINK REL="stylesheet" HREF="book.css" TYPE="text/css">
<TITLE>
Avoid converting StringBuffer or StringBuilder to String to check length [OPT.SBL]
</TITLE>
</HEAD>
<BODY BGCOLOR=#FFFFFF>
<STRONG>
Avoid converting StringBuffer or StringBuilder to String to check length [OPT.SBL]
</STRONG>
<p>
<BR><BR>
<STRONG>
DESCRIPTION
</STRONG>
<PRE>

This rule will flag cases where a StringBuffer or StringBuilder is converted
to a String to get the length. See NOTES and BENEFITS 

Mobile platforms have reduced resources, optimizations are especially important. for more information.


</PRE>
<STRONG>
SINCE
</STRONG>
<PRE>

v9.0


</PRE>
<STRONG>
NOTES
</STRONG>
<PRE>

This rule will flag a violation if the 'toString()' method of a StringBuffer
or StringBuilder method is called followed by a call to 'length()' or
'equals("")'. If the return value of 'toString()' is stored to a field or used
elsewhere then a violation will not be flagged.


</PRE>
<STRONG>
BENEFITS
</STRONG>
<PRE>

Mobile platforms have reduced resources, optimizations are especially important. 

StringBuffer and StringBuilder have a 'length()' method. It is more efficient
to call the 'length()' method instead of calling 'toString().length()' or
'toString().equals("")' when information about the length is required.


</PRE>
<STRONG>
EXAMPLE
</STRONG>
<PRE>

package examples.rules.opt;

public class SBL {
    boolean isEmptyStringBuffer(StringBuffer sb)
    {
        if (sb.toString().equals("")) { //VIOLATION
            return true;
        }
        return false;
    }
}


</PRE>
<STRONG>
REPAIR
</STRONG>
<PRE>

Use a call to 'StringBuffer.length()' instead.

package examples.rules.opt;

public class SBLFixed {
    boolean isEmptyStringBuffer(StringBuffer sb)
    {
        if (sb.length() == 0) { //FIXED
            return true;
        }
        return false;
    }
}


</PRE>
<STRONG>
REFERENCES
</STRONG>
<PRE>

<A HREF="http://developer.android.com/guide/practices/design/performance.html">http://developer.android.com/guide/practices/design/performance.html</A>

</PRE>
</BODY>
</HTML>
